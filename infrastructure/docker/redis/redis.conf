# Flash Sale Redis Configuration
# Optimized for data integrity over performance — sale data must survive crashes

# Persistence: Append-Only File
# Every write operation is logged, ensuring at most 1 second of data loss on crash
appendonly yes
appendfsync everysec

# Memory limits for local development
# In production, this would be sized based on: (max concurrent sales * avg key size)
maxmemory 256mb

# Reject writes when memory is full rather than evicting sale data
# Critical: evicting a stock counter mid-sale would cause overselling
maxmemory-policy noeviction

# Connection timeout (seconds) — close idle connections to free resources
timeout 300

# TCP keepalive (seconds) — detect dead connections
tcp-keepalive 60
